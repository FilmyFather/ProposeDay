<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Propose Day ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
/* --- CORE STYLES --- */
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
body{height:100vh;overflow:hidden;background:linear-gradient(135deg,#ffd1e8,#f5d9ff,#ffe6f2);touch-action:none;}

.page{display:none;height:100%;width:100%;align-items:center;justify-content:center;padding:20px;flex-direction:column;}
.page.active{display:flex}

.card{
  width:100%;max-width:420px;background:rgba(255,255,255,.25);backdrop-filter:blur(18px);
  border-radius:28px;padding:24px;text-align:center;box-shadow:0 30px 70px rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,0.3);position:relative;
}

/* --- LUXURY MUSIC CONTROL (DRAGGABLE) --- */
#music-wrapper{
    position:fixed;top:15px;right:15px;z-index:9999;
    display:flex;flex-direction:column;align-items:center;
    touch-action: none; user-select: none;
}
.music-box{
    width:80px;height:80px;border-radius:50%;backdrop-filter:blur(15px);
    background:rgba(255,255,255,0.1);
    box-shadow:0 0 25px rgba(255,105,180,0.4);
    display:flex;justify-content:center;align-items:center;
    cursor:pointer;animation:pulse 2.5s infinite;
}
@keyframes pulse{
    0%,100%{ box-shadow:0 0 15px rgba(255,105,180,0.4); transform: scale(1);}
    50%{ box-shadow:0 0 45px rgba(0,200,255,0.5); transform: scale(1.05);}
}
.music-box span{font-size:35px;}
.music-options{
    margin-top:12px;display:none;flex-direction:column;gap:8px;
}
.music-options button{
    width:110px;padding:10px;border-radius:14px;border:1px solid rgba(255,255,255,0.3);
    background:rgba(255,255,255,0.15);color:#444;font-size:13px;font-weight:600;
    cursor:pointer;backdrop-filter:blur(10px);transition: 0.3s;
}
.music-options button:hover{ background:rgba(255,255,255,0.4); }

/* --- BUTTONS & ELEMENTS --- */
.btn{padding:14px 22px;border:none;border-radius:20px;background:linear-gradient(135deg,#ff6fb1,#ff9fd6);color:#fff;font-weight:600;cursor:pointer;margin-top:15px;box-shadow: 0 4px 15px rgba(255,111,177,0.3);}
.option{padding:12px;border-radius:18px;background:rgba(255,255,255,.45);margin-top:10px;cursor:pointer;transition:0.3s;}
.option.right{background:#6dff9a !important;}
.option.wrong{background:#ff6b6b !important;animation:shake .3s;}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:20px;}
.cell{font-size:32px;padding:18px;border-radius:16px;background:rgba(255,255,255,.45);cursor:pointer;}
#game-box {width:280px;height:300px;border:2px dashed #ff6fb1;margin:15px auto;position:relative;overflow:hidden;border-radius:15px;display:none;background:rgba(255,255,255,0.2);}
.progress-container {width:100%;height:15px;background:#eee;border-radius:10px;margin:15px 0;overflow:hidden;display:none;}
#progress-bar {width:0%;height:100%;background:#ff6fb1;transition:0.3s;}

/* --- ENVELOPE --- */
.envelope-wrapper { position: relative; width: 160px; height: 110px; background: #ff9fd6; margin: 20px auto; cursor: pointer; border-radius: 0 0 10px 10px; }
.envelope-flap { position: absolute; top: 0; left: 0; border-left: 80px solid transparent; border-right: 80px solid transparent; border-top: 65px solid #ff6fb1; transform-origin: top; transition: 0.6s; z-index: 3; }
.letter { position: absolute; bottom: 5px; left: 5px; width: 150px; height: 90px; background: #fff; padding: 15px; border-radius: 5px; transition: 0.8s; z-index: 2; overflow: hidden; font-size: 11px; }
.envelope-wrapper.open .envelope-flap { transform: rotateX(180deg); z-index: 1; }
.envelope-wrapper.open .letter { transform: translateY(-130px); height: 280px; width: 300px; left: -70px; z-index: 5; font-size: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); overflow-y: auto; font-family: 'Pacifico';}

/* --- MEMORIES & MODAL --- */
#photo-list { height: 380px; overflow-y: auto; padding: 10px; scrollbar-width: none;}
.mem-img { width: 100%; border-radius: 18px; margin-bottom: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); transition: 0.3s; cursor: pointer;}
#photoModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center; }
#photoModal img { max-width: 90%; max-height: 80%; border-radius: 15px; box-shadow: 0 0 20px rgba(255,255,255,0.5); }

@keyframes shake{ 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }
</style>
</head>
<body>

<audio id="bgMusic" loop preload="auto">
    <source src="http://ddl.safone.vip/4422238/Finding_Her_x_Dooron_Dooron_Mashup_Full_Version_Kushagra_Paresh.mp3?hash=AgADnS" type="audio/mpeg">
</audio>

<div id="photoModal" onclick="this.style.display='none'">
    <img id="modalImg" src="">
</div>

<div id="music-wrapper">
    <div class="music-box" id="musicBtn" onclick="toggleMusicMenu()">
        <span>üéß</span>
    </div>
    <div class="music-options" id="musicMenu">
        <button onclick="handleVolume(0.2)">LOW</button>
        <button onclick="handleVolume(0.5)">MID</button>
        <button onclick="handleVolume(1.0)">HIGH</button>
        <button onclick="handleVolume(0)">MUTE</button>
    </div>
</div>

<div class="page active" id="p1">
    <div class="card">
        <img src="https://media.tenor.com/lquwmqAgQekAAAAm/bubu-dudu.webp" class="gif">
        <p style="font-family:Pacifico; font-size:22px; color:#ff6fb1">3 years of love‚Ä¶ prove it ‚ù§Ô∏è</p>
        <input id="passInput" type="text" placeholder="Magic word..." style="width:100%; padding:14px; margin:15px 0; border:none; border-radius:15px; background:rgba(255,255,255,0.6); text-align:center; outline:none;">
        <button class="btn" onclick="validateLock()">Unlock</button>
        <div id="taanaBox" style="margin-top:15px; color:#d63384; font-size:14px; font-weight:600; min-height:20px;"></div>
        <div id="hintBox" style="display:none; margin-top:15px; background:rgba(255,255,255,0.5); padding:12px; border-radius:15px; border:1px dashed #ff6fb1; font-size:13px;">
            Hint: Agar Yuvraj Rajkumar hai‚Ä¶ to tum kya ho? ‚ù§Ô∏è
        </div>
    </div>
</div>

<div class="page" id="p2">
    <div class="card">
        <img src="https://media.tenor.com/YiMNm2QVdMoAAAAm/bubu-dudu-sseeyall.webp" class="gif">
        <p id="quizText" style="font-weight:600; margin-bottom:15px;"></p>
        <div id="quizOpts"></div>
    </div>
</div>

<div class="page" id="p3">
    <div class="card">
        <img src="https://media.tenor.com/nBQQ6XM5BhIAAAAm/cute.webp" class="gif">
        <h3 style="color:#ff6fb1">One last check‚Ä¶ üòâ</h3>
        <div style="display:flex; gap:15px; margin-top:25px; justify-content:center;">
            <button class="btn" onclick="go(4)">YES</button>
            <button class="btn" id="noBtn" onmouseover="dodge()" style="background:#bbb;">NO</button>
        </div>
    </div>
</div>

<div class="page" id="p4">
    <div class="card">
        <img src="https://media.tenor.com/-3Z-ojIe5IcAAAAm/bubu-dudu-sseeyall.webp" class="gif">
        <h3>The Proposal Hunt üíç</h3>
        <p id="ringCount" style="margin:10px 0; font-weight:600;">üíç 0 / 3</p>
        <div class="grid" id="ringGrid"></div>
    </div>
</div>

<div class="page" id="p5">
    <div class="card">
        <img src="https://media.tenor.com/bvXwJ4I19ZQAAAAm/cat-cat-meme.webp" class="gif">
        <h3>Catch My Love ‚ù§Ô∏è</h3>
        <div id="game-box"></div>
        <div class="progress-container" id="prog-wrap"><div id="progress-bar"></div></div>
        <button class="btn" id="gameStarter" onclick="initHeartGame()">Start Game</button>
    </div>
</div>

<div class="page" id="p6">
    <div class="card">
        <h3>A Letter For You üíå</h3>
        <div class="envelope-wrapper" onclick="this.classList.add('open')">
            <div class="envelope-flap"></div>
            <div class="letter">
                <p>‚ù§Ô∏è My Dear Dimple ‚ù§Ô∏è<br><br>
                These 03 Precious Years Have Been The Most Beautiful Journey Of My Life. You Are My Strength, My Happiness, And My Future.<br><br>
                - Only Yours Yuvraj üíãüíïüßø</p><br>
                <button class="btn" onclick="event.stopPropagation(); go(7)">Next</button>
            </div>
        </div>
    </div>
</div>

<div class="page" id="p7">
    <div class="card">
        <h3>Some Precious Moments üì∏</h3>
        <div id="photo-list">
            <img src="images/p1.jpg" class="mem-img" onclick="viewPhoto(this.src)" onerror="this.src='https://placehold.co/400x500?text=Precious+Moment+1'">
            <img src="images/p2.jpg" class="mem-img" onclick="viewPhoto(this.src)" onerror="this.src='https://placehold.co/400x500?text=Precious+Moment+2'">
            <img src="images/p3.jpg" class="mem-img" onclick="viewPhoto(this.src)" onerror="this.src='https://placehold.co/400x500?text=Precious+Moment+3'">
            <img src="images/p4.jpg" class="mem-img" onclick="viewPhoto(this.src)" onerror="this.src='https://placehold.co/400x500?text=Precious+Moment+4'">
            <img src="images/p5.jpg" class="mem-img" onclick="viewPhoto(this.src)" onerror="this.src='https://placehold.co/400x500?text=Precious+Moment+5'">
            <img src="images/p6.jpg" class="mem-img" onclick="viewPhoto(this.src)" onerror="this.src='https://placehold.co/400x500?text=Precious+Moment+6'">
        </div>
        <button class="btn" onclick="go(8)">One Last Thing‚Ä¶ ‚ù§Ô∏è</button>
    </div>
</div>

<div class="page" id="p8">
    <div class="card">
        <img src="https://media.tenor.com/qGiP_qcGH3MAAAAm/peach-goma.webp" class="gif">
        <h2 id="finalQ">Will you choose me? üíñ</h2>
        <div style="display:flex; flex-direction:column; align-items:center;">
            <button class="btn" id="yesBtn" onclick="finishStory()" style="font-size:18px; z-index:100;">YES</button>
            <button class="btn" id="dramaBtn" onclick="increaseDrama()" style="background:#999;">NO</button>
        </div>
    </div>
</div>

<div class="page" id="p9">
    <div class="card">
        <img src="https://media.tenor.com/nQD8tNYfJzQAAAAm/dance-love.webp" class="gif">
        <h2 style="color:#ff6fb1">I know you love me a lot! üéâ</h2>
        <p style="margin-top:15px; font-size:14px; line-height:1.6">You chose me again ‚Äî just like you did on April 6 & 31, 2023 üíñ</p>
        <button class="btn" onclick="location.reload()">Wanna do this again?</button>
    </div>
</div>

<script>
/* --- 1. DRAGGABLE HEADPHONE --- */
const wrapper = document.getElementById("music-wrapper");
let isDragging = false;
let offsetX, offsetY;

wrapper.addEventListener("pointerdown", (e) => {
    if(e.target.tagName === 'BUTTON') return;
    isDragging = true;
    offsetX = e.clientX - wrapper.getBoundingClientRect().left;
    offsetY = e.clientY - wrapper.getBoundingClientRect().top;
    wrapper.setPointerCapture(e.pointerId);
});

wrapper.addEventListener("pointermove", (e) => {
    if(!isDragging) return;
    wrapper.style.left = (e.clientX - offsetX) + "px";
    wrapper.style.top = (e.clientY - offsetY) + "px";
    wrapper.style.right = "auto";
});

wrapper.addEventListener("pointerup", (e) => {
    isDragging = false;
    wrapper.releasePointerCapture(e.pointerId);
});

/* --- 2. MUSIC LOGIC --- */
const music = document.getElementById("bgMusic");
const menu = document.getElementById("musicMenu");

function toggleMusicMenu() {
    menu.style.display = (menu.style.display === "flex") ? "none" : "flex";
}

function handleVolume(v) {
    if(v === 0) {
        music.pause();
    } else {
        music.volume = v;
        if(music.paused) music.play().catch(e=>{});
    }
    menu.style.display = "none";
}

/* --- 3. PASSWORD & UNLOCK --- */
let lockTries = 0;
const taunts = [
  "Arre Ghelsodi üòù Itna Bhi Mushkil Nahi Hai Loduuu...!",
  "Dhapudiii üòú Dil Se Try Karoo Dil Aur Ye Website Dono Ka Lock Khul Jayegaa..!",
  "Bhilan Fir Galat ‚ùå 3 Saal Ka Pyar Hai Apana Uska To Khyaal Rakho...!",
  "Wagri ü§Ø Fir Galat Yeh Bhi Tumko Mujhse Pyaar Hi Nahi Hai....!",
  "Gaanduu Insaan ü§¶‚Äç‚ôÇÔ∏è Last Chance !"
];
  

function validateLock() {
    let inp = document.getElementById("passInput").value.toLowerCase().trim();
    if(inp === "rajkumari") {
        confetti({ particleCount: 200, spread: 80, origin: { y: 0.6 } });
        music.currentTime = 62;
        // Logic to force play music on user interaction
        let playPromise = music.play();
        if (playPromise !== undefined) {
            playPromise.then(_ => {}).catch(error => {
                console.log("Autoplay prevented, music will start on next tap");
            });
        }
        setTimeout(() => go(2), 1000);
    } else {
        document.getElementById("taanaBox").innerText = taunts[Math.min(lockTries, 4)];
        lockTries++;
        if(lockTries >= 5) document.getElementById("hintBox").style.display = "block";
    }
}

/* --- 4. NAVIGATION --- */
function go(n) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById("p"+n).classList.add("active");
    if(n === 2) { qIdx = 0; buildQuiz(); }
}

/* --- 5. QUIZ (UPDATED WITH 9 QUESTIONS) --- */
const questions = [
    {q: "Humari 3 Saal Ki Journey Ko 1 Word Mein Kya Bologe?", o: ["Rollercoaster Ride", "Ekdum Filmi", "Stronger Together", "Bas Shuruat Hai", "Rab Ne Bana Di Jodi"], a: 4},
    {q: "Mr. Yuvraj Ki Wo Kaunsi Baat Hai Jo Mrs. Dimple Ko Sabse Zyada Irritate Karti Hai?", o: ["Baar Baar Sawal Poochna", "Ziddi Pana", "Late Reply Dena", "OVER-POSSESSIVE Hona", "Game/Phone Mein Lage Rehna"], a: 1},
    {q: "Propose Day Par Aapka Yuvraj Se Sabse Bada Promise Kya Hai?", o: ["Hamesha Saath Nibhana", "Kabhi Jhoot Na Bolna Aur Dher Saara Pyaar Dena", "Dhaal Banke Khade Rehna Aur Yuvi Ki Sari Baat Mananaa", "Inme Se Sab (Qki Aap Mere Aadarniya Pati-Parmeshwar Ho)"], a: 3},
    {q: "Who is The Lucky One In This Relationship?", o: ["Main (Yuvraj)", "Tum (Dimple)", "Hum Dono", "Pura Universe Jisko Jaat Fark Naa Pade", "Abhi Tak Faisla Nahi Hua"], a: 2},
    {q: "Can You Stay Forever With Mr. Yuvraj Chauhan?", o: ["Yes, Pakka Wala", "Bilkul Nahiii (Nikal-Lodian)", "Sochna Padega", "7 Janam Bhi Kam Hai", "Forever Till My Breath"], a: 3},
    {q: "What Is The Perfect Gift For You On Propose Day?", o: ["Sone ki Angooti", "Ek Pyaara Sa Khat (Letter)", "Dher Saari Chocolates", "Bas Tumhara Saath Zindagi Bhar Ke Liye...!", "Ek Tight Wali Hug"], a: 3},
    {q: "Mere Baare Mein Sabse Pehli Cheez Kya Pasand Aayi Thi?", o: ["Shakal Aur Style", "Nature Aur Dil", "Baat Karne Ka Tarika", "Respect Dena", "Pata Nahi Bas Ho Gaya Pyaar"], a: 4},
    {q: "Mrs. Dimple Yuvraj Chauhan Banne Ke Liye Kitni Excited Ho?", o: ["Thoda Sa Jaat Barabar", "Bahut Zyada", "Raha Nahi Jaata Tadap Hi Aesii Haina", "Sapna Sach Hone Jaisa", "Infinite Bhi Kam Utnaaa...!"], a: 4},
    {q: "What Do You Want From Me The Most?", o: ["Dher Saara Paisa (Gold Digger)", "Bas Tumhara Waqt", "Izzat Aur Care", "Bina Wajah Ka Pyaar", "Sab Kuch (Time, Izzat & Pyaar)"], a: 4}
];

let qIdx = 0;

function buildQuiz() {
    let q = questions[qIdx];
    document.getElementById("quizText").innerText = q.q;
    let box = document.getElementById("quizOpts");
    box.innerHTML = "";

    q.o.forEach((t, i) => {
        let d = document.createElement("div");
        d.className = "option";
        d.innerText = t;
        d.onclick = () => {
            if (i === q.a) {
                d.classList.add("right");
                // Confetti celebration for the right answer
                confetti({ 
                    particleCount: 100, 
                    spread: 70, 
                    origin: { y: 0.6 },
                    colors: ['#4b0082', '#ff0080', '#000000'] 
                });
                
                qIdx++;
                setTimeout(() => {
                    if (qIdx < questions.length) {
                        buildQuiz();
                    } else {
                        go(3); // Moving to the next section after last question
                    }
                }, 1000);
            } else {
                d.classList.add("wrong");
                // Optional: shake effect or alert for wrong answer
            }
        };
        box.appendChild(d);
    });
}

/* --- 6. PAGE 3 DODGE --- */
function dodge() {
    let btn = document.getElementById("noBtn");
    btn.style.position = "fixed";
    btn.style.left = Math.random()*80 + "vw";
    btn.style.top = Math.random()*80 + "vh";
}

/* --- 7. RING HUNT --- */
const ringMap = ["üí©","üí©","üíç","üí©","üíç","üí©","üí©","üí©","üíç"];
let foundRings = 0;
ringMap.forEach(item => {
    let c = document.createElement("div"); c.className="cell"; c.innerText="üçÉ";
    c.onclick = () => {
        if(c.innerText !== "üçÉ") return;
        c.innerText = item;
        if(item === "üíç") {
            foundRings++;
            document.getElementById("ringCount").innerText = `üíç ${foundRings} / 3`;
            if(foundRings === 3) setTimeout(() => go(5), 1000);
        }
    };
    document.getElementById("ringGrid").appendChild(c);
});

/* --- 8. HEART GAME (FIXED RAIN) --- */
let catchScore = 0;
function initHeartGame() {
    document.getElementById("gameStarter").style.display = "none";
    document.getElementById("game-box").style.display = "block";
    document.getElementById("prog-wrap").style.display = "block";
    // Spawns 3 hearts at once for better flow
    for(let i=0; i<3; i++) { setTimeout(spawnHeart, i*400); }
}
function spawnHeart() {
    if(catchScore >= 12) return;
    let h = document.createElement("div");
    h.innerText="‚ù§Ô∏è"; h.style.position="absolute"; h.style.left=Math.random()*250+"px"; h.style.top="-30px"; h.style.fontSize="25px"; h.style.cursor="pointer";
    document.getElementById("game-box").appendChild(h);
    let top = -30;
    let fall = setInterval(() => {
        top += 3.5; h.style.top = top + "px";
        if(top > 300) { clearInterval(fall); h.remove(); if(catchScore < 12) spawnHeart(); }
    }, 30);
    h.onclick = () => {
        catchScore++;
        clearInterval(fall); h.remove();
        document.getElementById("progress-bar").style.width = (catchScore/12)*100 + "%";
        if(catchScore >= 12) setTimeout(() => go(6), 500); else spawnHeart();
    };
}

/* --- 9. PHOTO FULL SCREEN --- */
function viewPhoto(src) {
    document.getElementById("modalImg").src = src;
    document.getElementById("photoModal").style.display = "flex";
}

/* --- 10. YES DRAMA --- */
let dramaStep = 0;
const dramaTxt = ["PLEASE", "PWEASEEE ü•∫", "ARE YOU SURE?", "THINK AGAIN üòè", "CLICK YES! ü•∫", "LAST CHANCE üí≠"];
let yesFSize = 18;
function increaseDrama() {
    let y = document.getElementById("yesBtn");
    let n = document.getElementById("dramaBtn");
    if(dramaStep < dramaTxt.length) {
        n.innerText = dramaTxt[dramaStep];
        yesFSize += 35;
        y.style.fontSize = yesFSize + "px";
        dramaStep++;
    } else {
        n.style.display = "none";
        y.style.width = "100%";
        y.style.height = "200px";
    }
}
function finishStory() { confetti({ particleCount: 300, spread: 100 }); go(9); }
</script>
</body>
</html>
